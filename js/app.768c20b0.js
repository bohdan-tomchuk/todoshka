(function(){"use strict";var e={6318:function(e,t,o){var n=o(9242),r=o(3396);function s(e,t,o,n,s,i){const a=(0,r.up)("Navigation"),u=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(a),(0,r.Wm)(u)],64)}const i={class:"navigation"},a=(0,r.Uk)(" Todoshka "),u={class:"btns"},c=(0,r.Uk)(" Register "),d=(0,r.Uk)(" Log In ");function l(e,t,o,n,s,l){const f=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("nav",i,[(0,r.Wm)(f,{to:"/"},{default:(0,r.w5)((()=>[a])),_:1}),(0,r._)("div",u,[n.isLoggedIn?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(f,{key:0,to:"/register",class:"go"},{default:(0,r.w5)((()=>[c])),_:1})),n.isLoggedIn?((0,r.wg)(),(0,r.iD)("button",{key:1,class:"go",onClick:t[0]||(t[0]=(...e)=>n.handleSignOut&&n.handleSignOut(...e))},"Sign out")):((0,r.wg)(),(0,r.j4)(f,{key:2,to:"/login",class:"go"},{default:(0,r.w5)((()=>[d])),_:1}))])])}var f=o(4870),g=o(3379),h=o(678),p=o(65),v={name:"Navigation",setup(){const e=(0,h.tv)(),t=(0,p.oR)(),o=(0,f.iH)(!1);(0,r.bv)((()=>{(0,g.Aj)((0,g.v0)(),(e=>{o.value=!!e}))}));const n=()=>{(0,g.w7)((0,g.v0)()).then((()=>{t.state.user.user.id="",t.state.user.user.todos=[],e.push("/")}))};return{isLoggedIn:o,handleSignOut:n}}},m=o(89);const b=(0,m.Z)(v,[["render",l],["__scopeId","data-v-008de108"]]);var y=b,w={components:{Navigation:y}};const k=(0,m.Z)(w,[["render",s]]);var j=k,O=o(5431);(0,O.z)("/todoshka/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const A=(0,h.p7)({history:(0,h.r5)(),routes:[{path:"/",component:()=>o.e(634).then(o.bind(o,3634))},{path:"/todo-list/:userId",component:()=>o.e(320).then(o.bind(o,5320)),meta:{requiresAuth:!0}},{path:"/register",component:()=>o.e(661).then(o.bind(o,8661))},{path:"/login",component:()=>o.e(441).then(o.bind(o,1441))}]}),N=()=>new Promise(((e,t)=>{const o=(0,g.Aj)((0,g.v0)(),(t=>{o(),e(t)}),t)}));A.beforeEach((async(e,t,o)=>{e.matched.some((e=>e.meta.requiresAuth))?await N()?o():(alert("you dont have access"),o("/")):o()}));var S=A,C=o(4275),T=o(1178),U={state:{user:{id:"",todos:[]}},getters:{},mutations:{setUser(e,t){e.user.id=t.uid},newTodo(e,t){const o={content:t};e.user.todos.unshift(o)}},actions:{async registerUser({commit:e,state:t},{email:o,password:n}){await(0,g.Xb)((0,g.v0)(),o,n).then((t=>{const o=t.user,n=(0,T.N8)();(0,T.t8)((0,T.iH)(n,"/todos/"+o.uid),{todos:""}),e("setUser",o)})).catch((e=>{const t=e.code,o=e.message;console.log(o,t)}))},async loginUser({commit:e,state:t,dispatch:o},{email:n,password:r}){await(0,g.e5)((0,g.v0)(),n,r).then((t=>{const o=t.user;e("setUser",o)})).catch((e=>{console.log(e.code),alert(e.message)}))},loggedUser({commit:e,state:t},o){e("setUser",o)},getTodos({state:e},t){const o=(0,T.iH)((0,T.N8)());(0,T.U2)((0,T.iU)(o,`todos/${t}/todos`)).then((t=>{if(t.exists()){const o=Object.values(t.val());e.user.todos.unshift(...o)}else console.log("No data available")})).catch((e=>{console.error(e)}))},async newTodo({state:e,commit:t},o){const n=(0,T.N8)(),r={content:o},s=(0,T.VF)((0,T.iU)((0,T.iH)(n),"todos")).key,i={};i["/todos/"+e.user.id+"/todos/"+s]=r,(0,T.Vx)((0,T.iH)(n),i),t("newTodo",o)}}},_=(0,p.MT)({modules:{user:U}});const E={apiKey:"AIzaSyD674mNHF8Gw-LnFv3SVG0F7Cq1UGKfKP0",authDomain:"todoshka-18fdf.firebaseapp.com",projectId:"todoshka-18fdf",storageBucket:"todoshka-18fdf.appspot.com",messagingSenderId:"380440446454",appId:"1:380440446454:web:577ea514c104af87e8f3d7"};(0,C.ZF)(E),(0,n.ri)({created(){(0,g.Aj)((0,g.v0)(),(e=>{e&&(this.$store.dispatch("loggedUser",e),this.$store.dispatch("getTodos",e.uid))}))},render:()=>(0,r.h)(j)}).use(_).use(S).mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,s){if(!n){var i=1/0;for(d=0;d<e.length;d++){n=e[d][0],r=e[d][1],s=e[d][2];for(var a=!0,u=0;u<n.length;u++)(!1&s||i>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[u])}))?n.splice(u--,1):(a=!1,s<i&&(i=s));if(a){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,r,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))}}(),function(){o.u=function(e){return"js/"+e+"."+{320:"5bdb5fb0",441:"943358d3",634:"8faef780",661:"e5662552"}[e]+".js"}}(),function(){o.miniCssF=function(e){return"css/"+e+"."+{320:"7814af07",634:"3aa65697"}[e]+".css"}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="todoshka-front:";o.l=function(n,r,s,i){if(e[n])e[n].push(r);else{var a,u;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var l=c[d];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+s){a=l;break}}a||(u=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",t+s),a.src=n),e[n]=[r];var f=function(t,o){a.onerror=a.onload=null,clearTimeout(g);var r=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((function(e){return e(o)})),t)return t(o)},g=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),u&&document.head.appendChild(a)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/todoshka/"}(),function(){var e=function(e,t,o,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var s=function(s){if(r.onerror=r.onload=null,"load"===s.type)o();else{var i=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=i,u.request=a,r.parentNode.removeChild(r),n(u)}};return r.onerror=r.onload=s,r.href=t,document.head.appendChild(r),r},t=function(e,t){for(var o=document.getElementsByTagName("link"),n=0;n<o.length;n++){var r=o[n],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===e||s===t))return r}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){r=i[n],s=r.getAttribute("data-href");if(s===e||s===t)return r}},n=function(n){return new Promise((function(r,s){var i=o.miniCssF(n),a=o.p+i;if(t(i,a))return r();e(n,a,r,s)}))},r={143:0};o.f.miniCss=function(e,t){var o={320:1,634:1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=n(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}(),function(){var e={143:0};o.f.j=function(t,n){var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var s=new Promise((function(o,n){r=e[t]=[o,n]}));n.push(r[2]=s);var i=o.p+o.u(t),a=new Error,u=function(n){if(o.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",a.name="ChunkLoadError",a.type=s,a.request=i,r[1](a)}};o.l(i,u,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,s,i=n[0],a=n[1],u=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(u)var d=u(o)}for(t&&t(n);c<i.length;c++)s=i[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},n=self["webpackChunktodoshka_front"]=self["webpackChunktodoshka_front"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(6318)}));n=o.O(n)})();
//# sourceMappingURL=app.768c20b0.js.map